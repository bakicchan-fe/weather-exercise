(this["webpackJsonpweather-info-exercise-ts"]=this["webpackJsonpweather-info-exercise-ts"]||[]).push([[0],{162:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},189:function(e){e.exports=JSON.parse('[{"id":6541469,"value":"Trento","country":"IT","coord":{"lon":11.12074,"lat":46.070431}},{"id":2643741,"value":"London","country":"GB","coord":{"lon":-0.09184,"lat":51.512791}},{"id":1275339,"value":"Mumbai","country":"IN","coord":{"lon":72.847939,"lat":19.01441}},{"id":2867714,"value":"M\xfcnchen","country":"DE","coord":{"lon":11.57549,"lat":48.137428}},{"id":2968815,"value":"Paris","country":"FR","coord":{"lon":2.3486,"lat":48.853401}},{"id":5128638,"value":"New York","country":"US","coord":{"lon":-75.499901,"lat":43.000351}},{"id":6542284,"value":"Venezia","country":"IT","coord":{"lon":12.33092,"lat":45.4389}},{"id":2950159,"value":"Berlin","country":"DE","coord":{"lon":13.41053,"lat":52.524368}},{"id":1795565,"value":"Shenzhen","country":"CN","coord":{"lon":114.068298,"lat":22.54554}},{"id":1871859,"value":"Pyongyang","country":"KP","coord":{"lon":125.754318,"lat":39.033852}},{"id":524901,"value":"Moscow","country":"RU","coord":{"lon":37.615555,"lat":55.75222}},{"id":4409896,"value":"Springfield","country":"US","coord":{"lon":-93.298241,"lat":37.215328}},{"id":5454711,"value":"Albuquerque","country":"US","coord":{"lon":-106.651138,"lat":35.084492}},{"id":4505716,"value":"Baltimore","country":"US","coord":{"lon":-82.600723,"lat":39.845341}},{"id":2147714,"value":"Sydney","country":"AU","coord":{"lon":151.207321,"lat":-33.867851}},{"id":1261481,"value":"New Delhi","country":"IN","coord":{"lon":77.23114,"lat":28.61282}},{"id":1880252,"value":"Singapore","country":"SG","coord":{"lon":103.850067,"lat":1.28967}},{"id":1689431,"value":"San Jose","country":"PH","coord":{"lon":120.9925,"lat":15.79083}},{"id":2964574,"value":"Dublin","country":"IE","coord":{"lon":-6.26719,"lat":53.34399}},{"id":2759794,"value":"Amsterdam","country":"NL","coord":{"lon":4.88969,"lat":52.374031}}]')},257:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=(a(162),a(152)),l=a(114),u=a(43),s=a(54),d=a.n(s),h=a(78),j=function(e){return e.toLowerCase()},b=function(e){var t=e.apiCall,a=e.successAction;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var n=Object(h.a)(d.a.mark((function n(r,c){var o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:o=n.sent,a&&r({type:a,payload:o}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()}},f=a(137),v=a.n(f),p=function(){var e=Object(h.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.coord,n=t.id,r=t.value,e.next=3,v.a.get((c=a.lat,o=a.lon,"".concat("http://api.openweathermap.org/data/2.5/weather","?lat=").concat(c,"&lon=").concat(o,"&appid=").concat("9eddb87de3500e438f2b49b606e6121e"))).then((function(e){var t=e.data,a=t.coord,r=t.weather,c=t.name;return{id:n,coord:a,weather:r,value:c}})).catch((function(e){return{id:n,coord:a,weather:[],value:r,error:!0}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}var c,o}),e)})));return function(t){return e.apply(this,arguments)}}(),O="STORE_WEATHER_DATA",w="DELETE_RECORD",m="EDIT_RECORD",y=b({apiCall:function(e){return p(e)},successAction:O}),g=b({apiCall:function(e){return p(e)},successAction:m}),x={weatherData:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case O:return Object(u.a)(Object(u.a)({},e),{},{weatherData:[n].concat(Object(l.a)(e.weatherData))});case m:var r=e.weatherData.findIndex((function(e){return e.id===n.id})),c=Object(l.a)(e.weatherData);return c[r]=n,Object(u.a)(Object(u.a)({},e),{},{weatherData:c});case w:return Object(u.a)(Object(u.a)({},e),{},{weatherData:e.weatherData.filter((function(e){return e.id!==n}))})}return e},D=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),N=Object(i.a)({reducer:S,preloadedState:D});N.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(N.getState())}));var C=a(97);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(185);var R=a(66),k=(a(186),a(55)),E=a(261),I=a(153),A=a(263),T=a(260),W=a(262),M=a(259),U=a(264),J=a(265),B=a(52),L=(a(187),a(13)),P=Object(n.memo)((function(e){var t=e.weatherInfo,a=e.editRecord,r=e.deleteRecord,c=t.value,o=t.id,i=t.weather,l=t.coord,u=Object(n.useState)(!1),s=Object(R.a)(u,2),d=s[0],h=s[1],j=Object(n.useCallback)((function(){a({coord:l,id:o,value:c}),h(!0),setTimeout((function(){h(!1)}),1e3)}),[l,a,o,c]),b=Object(n.useCallback)((function(){r(o),I.b.success("City deleted!")}),[r,o]),f=Object(n.useMemo)((function(){if(t.error)return Object(L.jsxs)(A.a,{span:12,children:[Object(L.jsx)(U.a,{className:"error-icon"}),Object(L.jsx)("p",{children:"Unable to fetch data"})]});var e=i[0],a=e.icon,n=e.description;return Object(L.jsxs)(A.a,{span:12,children:[Object(L.jsx)(T.a,{alt:n,src:"http://openweathermap.org/img/wn/".concat(a,"@2x.png"),width:40,height:40,preview:!1}),Object(L.jsx)("p",{children:i[0].description})]})}),[i,t.error]);return Object(L.jsxs)(W.a,{align:"middle",justify:"space-between",className:"row-margin",children:[Object(L.jsx)(A.a,{span:4,children:Object(L.jsx)("h3",{children:c})}),f,Object(L.jsxs)(A.a,{children:[Object(L.jsx)(J.a,{spin:d,className:"icon margin-right-10",onClick:j}),Object(L.jsx)(B.a,{className:"icon",onClick:b})]}),Object(L.jsx)(M.a,{className:"margin-top-10",dashed:!0})]},o)})),_={retrieveWeather:y,editRecord:g,deleteRecord:function(e){return{type:w,payload:e}}},q=Object(C.b)((function(e){return{weatherData:e.weatherData}}),_)((function(e){var t=e.weatherData,r=e.retrieveWeather,c=e.editRecord,o=e.deleteRecord,i=a(189),l=Object(n.useState)(),u=Object(R.a)(l,2),s=u[0],d=u[1],h=Object(n.useState)([]),b=Object(R.a)(h,2),f=b[0],v=b[1];Object(n.useEffect)((function(){if(t.length>0){var e=i.filter((function(e){return!t.find((function(t){return t.id===e.id}))}));v(e)}else v(i)}),[t]);var p=Object(n.useCallback)((function(e){var t=i.filter((function(t){return j(t.value).startsWith(j(e))}));v(t)}),[i]),O=Object(n.useCallback)((function(e,t){var a=t.coord,n=t.id;r({coord:a,id:n,value:e})}),[r]),w=Object(n.useMemo)((function(){return 0===t.length?Object(L.jsx)(k.a,{className:"margin-top-50"}):t.map((function(e){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(P,{weatherInfo:e,deleteRecord:o,editRecord:c},e.id)})}))}),[o,c,t]),m=Object(n.useMemo)((function(){return 0===f.length}),[f.length]);return Object(L.jsxs)("div",{className:"container",children:[Object(L.jsx)("header",{className:"header",children:Object(L.jsx)("h1",{children:"Weather Info"})}),Object(L.jsxs)("div",{className:"options-container",children:[Object(L.jsx)(E.a,{disabled:m,allowClear:!0,placeholder:m?"No city available":"Write or choose a city",options:f,value:s,className:"margin-autocomplete",onSelect:function(e,t){O(e,t),d("")},onChange:d,onSearch:p}),w]})]})}));o.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(C.a,{store:N,children:Object(L.jsx)(q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[257,1,2]]]);
//# sourceMappingURL=main.d020f5ed.chunk.js.map